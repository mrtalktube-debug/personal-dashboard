<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Dashboard - Michael</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --p-blue: #0073b1; --bg: linear-gradient(135deg, #001a33 0%, #000a14 100%); }
        body { background: var(--bg); min-height: 100vh; font-family: 'Inter', sans-serif; margin: 0; color: #1a1a1a; }
        .widget { background: rgba(255,255,255,0.98); border-radius: 6px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; position: relative; overflow: hidden; }
        .tab-btn { font-size: 0.65rem; font-weight: 800; padding: 10px; color: #666; border-bottom: 2px solid transparent; text-transform: uppercase; flex: 1; transition: 0.2s; text-align: center; cursor: pointer; }
        .tab-btn.active { color: var(--p-blue); border-bottom-color: var(--p-blue); background: rgba(0,115,177,0.05); }
        .settings-panel { position: fixed; right: 0; top: 0; height: 100vh; width: 100%; max-width: 480px; background: white; z-index: 100; box-shadow: -10px 0 30px rgba(0,0,0,0.5); transform: translateX(100%); transition: 0.3s ease; overflow-y: auto; }
        .settings-panel.open { transform: translateX(0); }
        .sparkline-bg { position: absolute; bottom: 0; left: 0; right: 0; height: 40px; opacity: 0.08; background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 30" xmlns="http://www.w3.org/2000/svg"><path d="M0 30 L10 20 L20 25 L30 15 L40 18 L50 5 L60 10 L70 2 L80 12 L90 5 L100 0 L100 30 Z" fill="%230073b1"/></svg>'); background-size: cover; background-position: bottom; pointer-events: none; }
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--p-blue); border-radius: 4px; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .ai-transition { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useMemo } = React;

const GOOGLE_CLIENT_ID = "196901777247-3ak09abjpa3dm5908a5f8m08d4o7gqj8.apps.googleusercontent.com";
const ALLOWED_EMAIL = "diabaas3@gmail.com"; 

const S = {
    load: (k, d) => { try { const v = localStorage.getItem('d_'+k); return v ? JSON.parse(v) : d; } catch(e) { return d; } },
    save: (k, v) => localStorage.setItem('d_'+k, JSON.stringify(v)),
    remove: (k) => localStorage.removeItem('d_'+k)
};

const emitCmd = (type, payload) => window.dispatchEvent(new CustomEvent('dashCmd', { detail: { type, payload } }));
const fmtDate = (dStr) => { const p = dStr.split('-'); return p.length===3 ? `${p[2]}-${p[1]}-${p[0]}` : dStr; };

const T = {
    nl: { port: 'Portfolio', ag: 'Agenda', nws: 'Nieuws', rad: 'Investeringen', deal: 'Pepper Deals', rec: 'Recepten', lang: 'Talen', day: 'DAG', wk: 'WEEK', src: 'BRON', blk: 'BLOCK', cal: 'Kalender', std: 'Stand', lst: 'Laatste', new: 'Nieuw Spel' },
    en: { port: 'Portfolio', ag: 'Schedule', nws: 'News', rad: 'Investments', deal: 'Deals', rec: 'Recipes', lang: 'Languages', day: 'DAY', wk: 'WEEK', src: 'SOURCE', blk: 'BLOCK', cal: 'Calendar', std: 'Standings', lst: 'Latest', new: 'New Game' }
};

const Ico = {
    Set: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>,
    Wea: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/></svg>,
    Loc: () => <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>,
    Bot: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>,
    Cry: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>,
    Cal: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>,
    Rad: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>,
    Tag: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/></svg>,
    F1: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/></svg>,
    Glf: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path strokeWidth="2" d="M12 18a6 6 0 100-12 6 6 0 000 12z"/></svg>,
    Trp: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 4v2a4 4 0 01-8 0V4m12 4v2a4 4 0 01-1 2.652M4 8v2a4 4 0 001 2.652M12 20v-4m0 0V11m0 5h-4m4 0h4" /></svg>
};

function WeatherBar({ lang }) {
    const [c, setC] = useState(S.load('wcity', 'Zoetermeer'));
    const [w, setW] = useState(null);
    const [locLoading, setLocLoading] = useState(false);

    useEffect(() => { const h = (e) => { if(e.detail.type === 'SET_CITY') { setC(e.detail.payload); S.save('wcity', e.detail.payload); }}; window.addEventListener('dashCmd', h); return () => window.removeEventListener('dashCmd', h); }, []);
    
    useEffect(() => {
        fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${c}&count=1&language=${lang}`).then(r=>r.json()).then(d=>{
            if(d.results){
                const { latitude:lat, longitude:lon, name } = d.results[0];
                fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,apparent_temperature,precipitation&hourly=precipitation_probability&timezone=auto`)
                .then(r=>r.json()).then(wd => { const ch=new Date().getHours(); let rf=null; for(let i=ch; i<ch+12; i++) { if(wd.hourly.precipitation_probability[i]>30){rf=i-ch;break;} } setW({ t: Math.round(wd.current.temperature_2m), f: Math.round(wd.current.apparent_temperature), rain: rf, name }); });
            }
        });
    }, [c, lang]);

    const handleLocate = () => {
        if(!navigator.geolocation) return alert('Geolocatie wordt niet ondersteund door je browser.');
        setLocLoading(true);
        navigator.geolocation.getCurrentPosition(async (pos) => {
            const { latitude, longitude } = pos.coords;
            try {
                const res = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=${lang}`);
                const data = await res.json();
                const newCity = data.city || data.locality || 'Amsterdam';
                setC(newCity);
                S.save('wcity', newCity);
            } catch(e) { console.error("Locatiefout:", e); }
            setLocLoading(false);
        }, () => { alert('Toegang tot locatie geweigerd.'); setLocLoading(false); });
    };

    return (
        <div className="bg-white/10 px-4 md:px-10 py-3 border-b border-white/10 flex justify-between items-center text-white text-xs font-bold uppercase tracking-widest">
            <div className="flex gap-4 md:gap-8 items-center w-full">
                <div className="flex items-center gap-1.5">
                    <div className="flex items-center gap-2 cursor-pointer hover:text-blue-300 transition" onClick={()=>{const n=prompt(lang==='nl'?"Stad:":"City:",c);if(n){setC(n);S.save('wcity',n);}}}>
                        <Ico.Wea/> <span className="hidden md:inline">{w?.name||c}</span>
                    </div>
                    <button onClick={handleLocate} className={`p-1 bg-white/10 rounded hover:bg-white/20 transition ${locLoading ? 'animate-pulse text-blue-300' : ''}`} title="Gebruik huidige locatie">
                        <Ico.Loc />
                    </button>
                </div>
                <div className="flex gap-3 md:gap-4 items-center"><span className="text-sm md:text-lg">{w?.t}Â°C</span><span className="opacity-60 text-[10px] md:text-xs">{lang==='nl'?'Gevoel':'Feels'}: {w?.f}Â°C</span></div>
                <div className="ml-auto bg-blue-500/20 px-3 py-1.5 rounded flex items-center gap-2"><span className="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></span><span className="hidden md:inline">{w?.rain === 0 ? (lang==='nl'?"Nu regen":"Raining") : w?.rain ? (lang==='nl'?`Regen over ${w.rain}u`:`Rain in ${w.rain}h`) : (lang==='nl'?"Geen regen verwacht":"No rain expected")}</span><span className="md:hidden">{w?.rain===0?"Regen":w?.rain?`${w.rain}u`:"Droog"}</span></div>
            </div>
        </div>
    );
}

function DailyBriefing({ lang }) {
    const hour = new Date().getHours();
    let greeting = hour >= 6 && hour < 12 ? 'Goedemorgen' : hour >= 12 && hour < 18 ? 'Goedemiddag' : 'Goedenavond';
    if(lang === 'en') greeting = hour >= 6 && hour < 12 ? 'Good morning' : hour >= 12 && hour < 18 ? 'Good afternoon' : 'Good evening';

    return (
        <div className="bg-blue-600/20 border border-blue-500/30 text-blue-100 rounded-lg p-4 mb-6 flex flex-col md:flex-row items-center gap-4 shadow-lg backdrop-blur-md">
            <div className="bg-blue-500 p-2 rounded-full text-white shrink-0"><Ico.Bot /></div>
            <div className="text-sm font-medium leading-relaxed">
                <span className="font-bold">{greeting}, Michael.</span> Live API systemen en veilige Vercel backend geactiveerd.
            </div>
        </div>
    );
}

function CryptoWidget({ lang }) {
    const [valuta, setValuta] = useState('EUR'); 
    const [portfolio, setPortfolio] = useState([]);
    const [total, setTotal] = useState(0);
    const [loading, setLoading] = useState(true);

    const getMockTrends = (sym) => {
        const hash = sym.split('').reduce((a,b)=>a+b.charCodeAt(0),0);
        return { h: ((hash%5)-2)+0.4, d: ((hash%15)-5)+0.2, w: ((hash%30)-10)+1.1, m: ((hash%60)-20)+5.5, y: ((hash%200)-50)+40.0 };
    };

    useEffect(() => {
        const bvKeys = S.load('bitvavo_keys', {pub: '', sec: ''});
        if(!bvKeys.pub) { setLoading(false); return; }
        fetch('/api/bitvavo', { method: 'POST', body: JSON.stringify({ key: bvKeys.pub, secret: bvKeys.sec }) })
            .then(r=>r.json()).then(data => {
                if(data.balances) {
                    let t = 0;
                    const combined = data.balances.map(b => {
                        const price = data.prices.find(p => p.market === `${b.symbol}-EUR`)?.price || 1;
                        const val = (parseFloat(b.available) + parseFloat(b.inOrder)) * price;
                        t += val;
                        return { sym: b.symbol, amount: parseFloat(b.available)+parseFloat(b.inOrder), price, val, tr: getMockTrends(b.symbol) };
                    }).sort((a,b) => b.val - a.val);
                    setPortfolio(combined); setTotal(t);
                }
                setLoading(false);
            }).catch(() => setLoading(false));
    }, []);
    
    const sym = valuta==='EUR'?'â‚¬':'$';
    const totalTrend = portfolio.reduce((acc, c) => acc + (c.tr.d * (c.val / (total || 1))), 0);

    return (
        <div className="widget h-[450px] flex flex-col">
            <div className="p-4 bg-gray-50 border-b flex justify-between items-center shrink-0">
                <div className="flex items-center gap-2 text-gray-500"><Ico.Cry/><h3 className="text-[10px] font-black uppercase tracking-widest text-gray-400">Live Bitvavo</h3></div>
                <div className="flex gap-1 bg-gray-200 p-1 rounded">
                    {['EUR', 'USD'].map(v => <button key={v} onClick={()=>setValuta(v)} className={`px-3 py-1 text-xs font-bold rounded uppercase ${valuta===v?'bg-white shadow-sm text-blue-700':'text-gray-500'}`}>{v}</button>)}
                </div>
            </div>
            <div className="p-5 flex-1 flex flex-col bg-white overflow-hidden">
                <div className="mb-6 shrink-0">
                    <span className="text-lg font-bold text-gray-400 block mb-1 uppercase">WAARDE ({valuta})</span>
                    <div className={`text-5xl font-black tracking-tight ${totalTrend >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                        {loading ? '...' : `${sym} ${total.toLocaleString('nl-NL', {maximumFractionDigits:0})}`}
                    </div>
                </div>
                <div className="space-y-4 overflow-y-auto flex-1 hide-scroll pr-1 pb-2">
                    {portfolio.map((c, i) => {
                        const isPos = c.tr.d >= 0;
                        return (
                            <div key={i} className={`relative p-4 border rounded-xl flex flex-col shadow-sm transition ${isPos ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>
                                <div className="flex justify-between items-center mb-2">
                                    <div className="w-1/3">
                                        <span className="font-black text-2xl block text-gray-900 leading-none">{c.sym}</span>
                                        <span className="text-sm text-gray-600 font-medium mt-2 block">{c.amount.toLocaleString('nl-NL', {maximumFractionDigits: 6})} units</span>
                                    </div>
                                    <div className="w-1/3 flex flex-col items-center justify-center">
                                        <svg viewBox="0 0 40 20" className="w-10 h-5 overflow-visible">
                                            <polyline points={isPos ? "0,20 8,10 16,15 24,5 32,8 40,0" : "0,0 8,10 16,5 24,15 32,12 40,20"} fill="none" stroke={isPos ? '#16a34a' : '#dc2626'} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"/>
                                        </svg>
                                        <span className={`text-base font-black ${isPos ? 'text-green-600' : 'text-red-600'}`}>{isPos?'+':''}{c.tr.d.toFixed(1)}%</span>
                                    </div>
                                    <div className="w-1/3 text-right">
                                        <span className={`font-bold text-2xl block leading-none ${isPos ? 'text-green-600' : 'text-red-600'}`}>{sym}{c.price.toLocaleString('nl-NL')}</span>
                                        <span className="text-sm text-gray-500 font-mono mt-2 block">Waarde: {sym}{c.val.toLocaleString('nl-NL',{maximumFractionDigits:0})}</span>
                                    </div>
                                </div>
                                <div className="flex justify-between items-center pt-3 mt-2 border-t border-black/10 text-sm font-black uppercase tracking-tighter">
                                    {['1U', '1W', '1M', '1J'].map(tf => <div key={tf}>{tf}: <span className={c.tr[tf.substring(1).toLowerCase()]>=0?'text-green-600':'text-red-600'}>{c.tr[tf.substring(1).toLowerCase()]>0?'+':''}{c.tr[tf.substring(1).toLowerCase()].toFixed(1)}%</span></div>)}
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        </div>
    );
}

function SportsWidget({ lang }) {
    const [tab, setTab] = useState('lst');
    const [search, setSearch] = useState('');
    const [golfTour, setGolfTour] = useState('PGA');
    const [expansions, setExpansions] = useState({ f1c: false, f1s: false, f1l: false, gc: false, gs: false, gl: false });

    const f1Data = { 
        c: [ { r: "GP Australia", d: "08 Mar", t: "05:00", l: "5.278km", lp: 58, rd: "306.124km", rec: "1:19.813 (Leclerc)", map: "M0,15 L5,10 L15,10 L20,0 L30,20 L40,15 Z" }, { r: "GP China", d: "15 Mar", t: "09:00", l: "5.451km", lp: 56, rd: "305.066km", rec: "1:32.238 (Schumacher)", map: "M0,10 L10,5 L20,15 L30,5 L40,10 Z" }, { r: "GP Japan", d: "29 Mar", t: "07:00", l: "5.807km", lp: 53, rd: "307.471km", rec: "1:30.983 (Hamilton)", map: "M5,5 L15,15 L25,5 L35,15 Z" } ], 
        s: [ { p: 1, n: "Verstappen", fl: "ðŸ‡³ðŸ‡±", pt: 25 }, { p: 2, n: "Norris", fl: "ðŸ‡¬ðŸ‡§", pt: 18 }, { p: 3, n: "Leclerc", fl: "ðŸ‡²ðŸ‡¨", pt: 15 }, { p: 4, n: "Sainz", fl: "ðŸ‡ªðŸ‡¸", pt: 12 } ], 
        lst: { title: 'GP Abu Dhabi', res: [ { p: 1, n: 'Verstappen', time: '1:27:02' }, { p: 2, n: 'Leclerc', time: '+17.9s' }, { p: 3, n: 'Russell', time: '+20.3s' } ] } 
    };
    
    const golfData = { 
        c: [ { r: "The Players", d: "14 Mar", t: "14:00 NL", info: "TPC Sawgrass", logo: "â›³" }, { r: "The Masters", d: "10 Apr", t: "15:00 NL", info: "Augusta National", logo: "ðŸ†" } ], 
        s: [ { p: 1, n: "Scheffler", fl: "ðŸ‡ºðŸ‡¸", pt: "3200" }, { p: 2, n: "Kim", fl: "ðŸ‡°ðŸ‡·", pt: "2100" } ], 
        lst: { title: 'Arnold Palmer Inv.', res: [ { p: 1, n: 'Scheffler', time: '-15' }, { p: 2, n: 'Clark', time: '-14' } ] } 
    };

    const match = (s) => s.toLowerCase().includes(search.toLowerCase());
    const filter = (arr, key) => arr.filter(x => !search || match(x[key]));

    return (
        <div className="widget h-[450px]">
            <div className="p-4 border-b bg-gray-50 flex justify-between items-center shrink-0">
                <div className="flex items-center gap-2 text-gray-500"><Ico.Trp/><h3 className="text-[10px] font-black uppercase tracking-widest text-gray-400">Sport</h3></div>
                <input type="text" placeholder="Zoek op naam..." value={search} onChange={e=>setSearch(e.target.value)} className="w-1/2 px-2 py-1 text-[10px] border rounded outline-none focus:border-blue-500 shadow-sm" />
            </div>
            <div className="flex border-b bg-white shrink-0">
                {[{id:'cal', l:T[lang].cal}, {id:'lst', l:T[lang].lst}, {id:'std', l:T[lang].std}].map(t => <button key={t.id} onClick={() => setTab(t.id)} className={`tab-btn ${tab === t.id ? 'active' : ''}`}>{t.l}</button>)}
            </div>
            <div className="p-4 flex-1 overflow-y-auto space-y-6 bg-white hide-scroll">
                
                {/* F1 Section */}
                <div>
                    <div className="flex items-center gap-2 mb-2 border-b border-gray-100 pb-1 font-black text-[10px] text-[#0073b1]">F1</div>
                    <div className="space-y-2">
                        {tab === 'cal' && filter(f1Data.c, 'r').map(r => (
                            <div key={r.r} className="flex justify-between items-center text-xs p-3 bg-gray-50 rounded-lg border shadow-sm">
                                <div className="flex flex-col">
                                    <span className="font-bold text-gray-900">{r.r}</span>
                                    <span className="text-[9px] font-black text-gray-400 mt-1 uppercase tracking-wider">{r.d} | {r.t}</span>
                                </div>
                                <div className="flex items-center gap-4 border-l pl-4 border-gray-200">
                                    <div className="flex flex-col text-[8px] text-gray-500 font-bold leading-tight">
                                        <span>LENGTH: {r.l}</span>
                                        <span>LAPS: {r.lp}</span>
                                        <span>DISTANCE: {r.rd}</span>
                                        <span className="text-red-500">REC: {r.rec}</span>
                                    </div>
                                    <svg viewBox="0 0 40 20" className="w-12 h-6 opacity-60"><path d={r.map} fill="none" stroke="#111" strokeWidth="2"/></svg>
                                </div>
                            </div>
                        ))}
                        {tab === 'std' && filter(f1Data.s, 'n').map(s => <div key={s.n} className="flex justify-between items-center text-xs p-2 border-b"><div className="flex gap-3 font-bold"><span>{s.p}.</span><span>{s.fl}</span><span>{s.n.toUpperCase()}</span></div><span className="bg-gray-800 text-white px-2 rounded font-mono text-[10px]">{s.pt}</span></div>)}
                        {tab === 'lst' && filter(f1Data.lst.res, 'n').map(r => <div key={r.n} className="flex justify-between p-2 border-b text-xs"><span className="font-bold">{r.p}. {r.n}</span><span className="text-gray-500">{r.time}</span></div>)}
                    </div>
                </div>

                {/* Golf Section */}
                <div>
                    <div className="flex items-center justify-between mb-2 border-b border-gray-100 pb-1 font-black text-[10px] text-[#0073b1]">
                        <span>GOLF</span>
                        <div className="flex gap-1 bg-gray-100 p-0.5 rounded">
                            {['PGA', 'DP'].map(v => <button key={v} onClick={()=>setGolfTour(v)} className={`px-2 py-0.5 text-[8px] font-bold rounded uppercase ${golfTour===v?'bg-white shadow-sm text-blue-700':'text-gray-500'}`}>{v}</button>)}
                        </div>
                    </div>
                    <div className="space-y-2">
                        {tab === 'cal' && filter(golfData.c, 'r').map(r => (
                            <div key={r.r} className="flex justify-between items-center text-xs p-3 bg-gray-50 rounded-lg border shadow-sm">
                                <div className="flex flex-col">
                                    <span className="font-bold text-gray-900">{r.r}</span>
                                    <span className="text-[9px] font-bold text-gray-400 mt-1 uppercase">{r.d} | {r.t}</span>
                                </div>
                                <div className="flex items-center gap-3 border-l pl-4 border-gray-200">
                                    <span className="text-[8px] text-gray-500 font-bold uppercase">{r.info}</span>
                                    <span className="text-xl">{r.logo}</span>
                                </div>
                            </div>
                        ))}
                        {tab === 'std' && filter(golfData.s, 'n').map(s => <div key={s.n} className="flex justify-between items-center text-xs p-2 border-b"><div className="flex gap-3 font-bold"><span>{s.p}.</span><span>{s.fl}</span><span>{s.n.toUpperCase()}</span></div><span className="bg-gray-800 text-white px-2 rounded font-mono text-[10px]">{s.pt}</span></div>)}
                    </div>
                </div>
            </div>
        </div>
    );
}

function App() {
    const [isAuth, setIsAuth] = useState(S.load('auth_status', false));
    const [layout, setLayout] = useState(S.load('layout_v7', ['ai', 'crypto', 'agenda', 'news', 'radar', 'pepper', 'recipe', 'sports', 'sudoku', 'lang']));

    if (!isAuth) return <div className="min-h-screen flex items-center justify-center bg-[#000a14] text-white">Authenticating Michael...</div>;

    const widgets = { ai: <div className="col-span-12 lg:col-span-8">AI ASSISTANT</div>, crypto: <div className="col-span-12 lg:col-span-4"><CryptoWidget lang="nl" /></div>, agenda: <div className="col-span-12 lg:col-span-4">AGENDA</div>, news: <div className="col-span-12 lg:col-span-8">NEWS</div>, sports: <div className="col-span-12 lg:col-span-4"><SportsWidget lang="nl" /></div> };

    return (
        <div className="flex flex-col min-h-screen">
            <WeatherBar lang="nl" />
            <header className="px-6 md:px-10 pt-8 pb-6 max-w-[1600px] mx-auto w-full flex justify-between items-end border-b border-white/10 mb-6">
                <div><h1 className="text-xl md:text-2xl font-black text-white tracking-tight uppercase drop-shadow-md leading-none">Personal Dashboard</h1><p className="text-blue-200 text-[10px] font-black uppercase tracking-[0.4em] mt-2">Michael</p></div>
            </header>
            <main className="px-6 md:px-10 pb-16 max-w-[1600px] mx-auto w-full">
                <DailyBriefing lang="nl" />
                <div className="grid grid-cols-12 gap-6 md:gap-8">
                    {layout.map(w => <React.Fragment key={w}>{widgets[w]}</React.Fragment>)}
                </div>
            </main>
        </div>
    );
}

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>