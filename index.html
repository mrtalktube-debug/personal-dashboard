<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Dashboard - Michael</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --p-blue: #0073b1; --bg: linear-gradient(135deg, #001a33 0%, #000a14 100%); }
        body { background: var(--bg); min-height: 100vh; font-family: 'Inter', sans-serif; margin: 0; color: #1a1a1a; }
        .widget { background: rgba(255,255,255,0.98); border-radius: 6px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; position: relative; overflow: hidden; }
        .tab-btn { font-size: 0.65rem; font-weight: 800; padding: 10px; color: #666; border-bottom: 2px solid transparent; text-transform: uppercase; flex: 1; transition: 0.2s; text-align: center; cursor: pointer; }
        .tab-btn.active { color: var(--p-blue); border-bottom-color: var(--p-blue); background: rgba(0,115,177,0.05); }
        .sudoku-container { width: 100%; max-width: 320px; aspect-ratio: 1/1; margin: 0 auto; display: grid; grid-template-columns: repeat(9, 1fr); border: 2px solid #1a1a1a; background: white; }
        .sudoku-cell { width: 100%; height: 100%; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.1s; position: relative; user-select: none; }
        .sudoku-cell.selected { background: #e0f2fe; border-color: var(--p-blue); z-index: 10; }
        .sudoku-cell.fixed { background: #f8fafc; font-weight: 900; color: #1e293b; font-size: 1.1rem; }
        .sudoku-cell.input { font-weight: 700; color: var(--p-blue); font-size: 1.2rem; }
        .sudoku-candidates { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); width: 100%; height: 100%; font-size: 0.45rem; line-height: 1; color: #64748b; padding: 1px; }
        .border-r-thick { border-right: 2px solid #1a1a1a !important; }
        .border-b-thick { border-bottom: 2px solid #1a1a1a !important; }
        .settings-panel { position: fixed; right: 0; top: 0; height: 100vh; width: 100%; max-width: 480px; background: white; z-index: 100; box-shadow: -10px 0 30px rgba(0,0,0,0.5); transform: translateX(100%); transition: 0.3s ease; overflow-y: auto; }
        .settings-panel.open { transform: translateX(0); }
        .sparkline-bg { position: absolute; bottom: 0; left: 0; right: 0; height: 40px; opacity: 0.08; background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 30" xmlns="http://www.w3.org/2000/svg"><path d="M0 30 L10 20 L20 25 L30 15 L40 18 L50 5 L60 10 L70 2 L80 12 L90 5 L100 0 L100 30 Z" fill="%230073b1"/></svg>'); background-size: cover; background-position: bottom; pointer-events: none; }
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--p-blue); border-radius: 4px; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        .ai-transition { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useMemo } = React;

const GOOGLE_CLIENT_ID = "196901777247-3ak09abjpa3dm5908a5f8m08d4o7gqj8.apps.googleusercontent.com";
const ALLOWED_EMAIL = "diabaas3@gmail.com"; 

const S = {
    load: (k, d) => { try { const v = localStorage.getItem('d_'+k); return v ? JSON.parse(v) : d; } catch(e) { return d; } },
    save: (k, v) => localStorage.setItem('d_'+k, JSON.stringify(v)),
    remove: (k) => localStorage.removeItem('d_'+k)
};

const emitCmd = (type, payload) => window.dispatchEvent(new CustomEvent('dashCmd', { detail: { type, payload } }));
const fmtDate = (dStr) => { const p = dStr.split('-'); return p.length===3 ? `${p[2]}-${p[1]}-${p[0]}` : dStr; };

const T = {
    nl: { port: 'Portfolio', ag: 'Agenda', nws: 'Nieuws', rad: 'Investeringen', deal: 'Pepper Deals', rec: 'Recepten', lang: 'Talen', day: 'DAG', wk: 'WEEK', src: 'BRON', blk: 'BLOCK', cal: 'Kalender', std: 'Stand', lst: 'Laatste', new: 'Nieuw Spel' },
    en: { port: 'Portfolio', ag: 'Schedule', nws: 'News', rad: 'Investments', deal: 'Deals', rec: 'Recipes', lang: 'Languages', day: 'DAY', wk: 'WEEK', src: 'SOURCE', blk: 'BLOCK', cal: 'Calendar', std: 'Standings', lst: 'Latest', new: 'New Game' }
};

const Ico = {
    Set: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>,
    Wea: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/></svg>,
    Loc: () => <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>,
    Bot: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>,
    Cry: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>,
    Cal: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>,
    Nws: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>,
    Rad: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>,
    Tag: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/></svg>,
    F1: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/></svg>,
    Glf: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeWidth="2" d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path strokeWidth="2" d="M12 18a6 6 0 100-12 6 6 0 000 12z"/></svg>,
    Trp: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 4v2a4 4 0 01-8 0V4m12 4v2a4 4 0 01-1 2.652M4 8v2a4 4 0 001 2.652M12 20v-4m0 0V11m0 5h-4m4 0h4" /></svg>
};

function WeatherBar({ lang }) {
    const [c, setC] = useState(S.load('wcity', 'Zoetermeer'));
    const [w, setW] = useState(null);
    const [locLoading, setLocLoading] = useState(false);

    useEffect(() => { const h = (e) => { if(e.detail.type === 'SET_CITY') { setC(e.detail.payload); S.save('wcity', e.detail.payload); }}; window.addEventListener('dashCmd', h); return () => window.removeEventListener('dashCmd', h); }, []);
    
    useEffect(() => {
        fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${c}&count=1&language=${lang}`).then(r=>r.json()).then(d=>{
            if(d.results){
                const { latitude:lat, longitude:lon, name } = d.results[0];
                fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,apparent_temperature,precipitation&hourly=precipitation_probability&timezone=auto`)
                .then(r=>r.json()).then(wd => { const ch=new Date().getHours(); let rf=null; for(let i=ch; i<ch+12; i++) { if(wd.hourly.precipitation_probability[i]>30){rf=i-ch;break;} } setW({ t: Math.round(wd.current.temperature_2m), f: Math.round(wd.current.apparent_temperature), rain: rf, name }); });
            }
        });
    }, [c, lang]);

    const handleLocate = () => {
        if(!navigator.geolocation) return alert('Geolocatie wordt niet ondersteund door je browser.');
        setLocLoading(true);
        navigator.geolocation.getCurrentPosition(async (pos) => {
            const { latitude, longitude } = pos.coords;
            try {
                const res = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=${lang}`);
                const data = await res.json();
                const newCity = data.city || data.locality || 'Amsterdam';
                setC(newCity);
                S.save('wcity', newCity);
            } catch(e) { console.error("Locatiefout:", e); }
            setLocLoading(false);
        }, () => { alert('Toegang tot locatie geweigerd.'); setLocLoading(false); });
    };

    return (
        <div className="bg-white/10 px-4 md:px-10 py-3 border-b border-white/10 flex justify-between items-center text-white text-xs font-bold uppercase tracking-widest">
            <div className="flex gap-4 md:gap-8 items-center w-full">
                <div className="flex items-center gap-1.5">
                    <div className="flex items-center gap-2 cursor-pointer hover:text-blue-300 transition" onClick={()=>{const n=prompt(lang==='nl'?"Stad:":"City:",c);if(n){setC(n);S.save('wcity',n);}}}>
                        <Ico.Wea/> <span className="hidden md:inline">{w?.name||c}</span>
                    </div>
                    <button onClick={handleLocate} className={`p-1 bg-white/10 rounded hover:bg-white/20 transition ${locLoading ? 'animate-pulse text-blue-300' : ''}`} title="Gebruik huidige locatie">
                        <Ico.Loc />
                    </button>
                </div>
                <div className="flex gap-3 md:gap-4 items-center"><span className="text-sm md:text-lg">{w?.t}Â°C</span><span className="opacity-60 text-[10px] md:text-xs">{lang==='nl'?'Gevoel':'Feels'}: {w?.f}Â°C</span></div>
                <div className="ml-auto bg-blue-500/20 px-3 py-1.5 rounded flex items-center gap-2"><span className="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></span><span className="hidden md:inline">{w?.rain === 0 ? (lang==='nl'?"Nu regen":"Raining") : w?.rain ? (lang==='nl'?`Regen over ${w.rain}u`:`Rain in ${w.rain}h`) : (lang==='nl'?"Geen regen verwacht":"No rain expected")}</span><span className="md:hidden">{w?.rain===0?"Regen":w?.rain?`${w.rain}u`:"Droog"}</span></div>
            </div>
        </div>
    );
}

function DailyBriefing({ lang }) {
    const hour = new Date().getHours();
    let greetingNL = hour >= 6 && hour < 12 ? 'Goedemorgen' : hour >= 12 && hour < 18 ? 'Goedemiddag' : 'Goedenavond';
    let greetingEN = hour >= 6 && hour < 12 ? 'Good morning' : hour >= 12 && hour < 18 ? 'Good afternoon' : 'Good evening';
    const greeting = lang === 'nl' ? greetingNL : greetingEN;

    return (
        <div className="bg-blue-600/20 border border-blue-500/30 text-blue-100 rounded-lg p-4 mb-6 flex flex-col md:flex-row items-center gap-4 shadow-lg backdrop-blur-md">
            <div className="bg-blue-500 p-2 rounded-full text-white shrink-0"><Ico.Bot /></div>
            <div className="text-sm font-medium leading-relaxed">
                <span className="font-bold">{greeting}, Michael.</span> Live API systemen en veilige Vercel backend geactiveerd.
            </div>
        </div>
    );
}

function AIWidget({ lang }) {
    const [msg, setMsg] = useState('');
    const [hist, setHist] = useState(S.load('ai_hist', [{r: 'ai', t: lang==='nl'?'Welkom. Typ een dashboard commando of vraag.':'Welcome. Type a command or ask a question.'}]));
    const [exp, setExp] = useState(false);
    
    const send = async () => {
        if(!msg) return; const n = [...hist, {r: 'usr', t: msg}]; setHist(n); S.save('ai_hist', n); setMsg('');
        setTimeout(() => { const r = [...n, {r: 'ai', t: lang==='nl'?'Aanvraag ontvangen. Momenteel in demo-modus.':'Request received. Currently in demo mode.'}]; setHist(r); S.save('ai_hist', r); }, 600);
    };

    return (
        <div className={`widget ai-transition ${exp ? 'h-[450px]' : 'h-[72px]'}`}>
            <div className="p-4 bg-gray-50 border-b flex justify-between items-center cursor-pointer" onClick={()=>setExp(!exp)}>
                <div className="flex items-center gap-2 text-gray-500"><Ico.Bot/><h3 className="text-[10px] font-black uppercase tracking-widest">AI Assistant</h3></div>
                <div className="text-[10px] font-bold text-gray-400 uppercase">{exp ? 'Sluiten â–²' : 'Openen â–¼'}</div>
            </div>
            {exp && <div className="flex-1 flex flex-col overflow-hidden bg-white">
                <div className="flex-1 p-4 overflow-y-auto space-y-4">
                    {hist.slice(-10).map((m, i) => (
                        <div key={i} className={`flex flex-col ${m.r==='ai'?'items-start':'items-end'}`}>
                            <div className={`p-3 rounded-lg text-sm max-w-[85%] shadow-sm ${m.r==='ai'?'bg-gray-100 text-gray-800':'bg-[#0073b1] text-white'}`}>{m.t}</div>
                        </div>
                    ))}
                </div>
                <div className="p-3 border-t bg-gray-50 flex gap-2">
                    <input value={msg} onChange={e=>setMsg(e.target.value)} onKeyPress={e=>e.key==='Enter'&&send()} placeholder="Bericht..." className="flex-1 border p-2.5 rounded text-sm outline-none" />
                    <button onClick={send} className="bg-[#0073b1] text-white px-5 font-bold rounded text-xs uppercase">Zend</button>
                </div>
            </div>}
        </div>
    );
}

function CryptoWidget({ lang }) {
    const [valuta, setValuta] = useState('EUR'); 
    const [portfolio, setPortfolio] = useState([
        { sym: 'BTC', amount: 0.04194015, price: 58019, val: 2433, tr: { h: 0.4, d: 2.2, w: -1.9, m: 22.5, y: 70.0 } },
        { sym: 'XRP', amount: 1201.099128, price: 1.202, val: 1443, tr: { h: -1.6, d: 5.2, w: 1.1, m: -4.5, y: 40.0 } },
        { sym: 'ETH', amount: 0.43855328, price: 2314, val: 1014, tr: { h: -1.8, d: -4.8, w: 8.1, m: 12.0, y: 35.0 } }
    ]);
    
    const sym = valuta === 'EUR' ? 'â‚¬' : '$';
    const total = portfolio.reduce((acc, c) => acc + c.val, 0);

    return (
        <div className="widget h-[450px] flex flex-col">
            <div className="p-4 bg-gray-50 border-b flex justify-between items-center shrink-0">
                <div className="flex items-center gap-2 text-gray-500"><Ico.Cry/><h3 className="text-[10px] font-black uppercase tracking-widest text-gray-400">Live Bitvavo</h3></div>
                <div className="flex gap-1 bg-gray-200 p-1 rounded">
                    {['EUR', 'USD'].map(v => <button key={v} onClick={()=>setValuta(v)} className={`px-3 py-1 text-xs font-bold rounded uppercase ${valuta===v?'bg-white shadow-sm text-blue-700':'text-gray-500'}`}>{v}</button>)}
                </div>
            </div>
            <div className="p-5 flex-1 flex flex-col bg-white overflow-hidden">
                <div className="mb-4 shrink-0">
                    <span className="text-[10px] font-bold text-gray-400 block mb-1 uppercase">WAARDE ({valuta})</span>
                    <div className="text-3xl font-black tracking-tight text-green-600">
                        {sym} {total.toLocaleString('nl-NL', {maximumFractionDigits:0})}
                    </div>
                </div>
                <div className="space-y-3 overflow-y-auto flex-1 hide-scroll pr-1 pb-2">
                    {portfolio.map((c, i) => {
                        const isPos = c.tr.d >= 0;
                        const sparklinePts = isPos ? "0,20 8,10 16,15 24,5 32,8 40,0" : "0,0 8,10 16,5 24,15 32,12 40,20";
                        return (
                            <div key={i} className={`relative p-3 border rounded-lg flex flex-col shadow-sm transition ${isPos ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>
                                <div className="flex justify-between items-center mb-2">
                                    <div className="w-1/3">
                                        <span className="font-black text-lg block text-gray-900 leading-none">{c.sym}</span>
                                        <span className="text-[10px] text-gray-600 font-medium mt-1 block">{c.amount.toFixed(4)} units</span>
                                    </div>
                                    <div className="w-1/3 flex flex-col items-center justify-center gap-1">
                                        <svg viewBox="0 0 40 20" className="w-10 h-4 overflow-visible">
                                            <polyline points={sparklinePts} fill="none" stroke={isPos ? '#16a34a' : '#dc2626'} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"/>
                                        </svg>
                                        <span className={`text-xs font-black ${isPos ? 'text-green-600' : 'text-red-600'}`}>{isPos?'+':''}{c.tr.d.toFixed(1)}%</span>
                                    </div>
                                    <div className="w-1/3 text-right">
                                        <span className={`font-bold text-lg block leading-none ${isPos ? 'text-green-600' : 'text-red-600'}`}>{sym}{c.price.toLocaleString('nl-NL')}</span>
                                        <span className="text-[10px] text-gray-500 font-mono mt-1 block">Waarde: {sym}{c.val.toLocaleString('nl-NL',{maximumFractionDigits:0})}</span>
                                    </div>
                                </div>
                                <div className="flex justify-between items-center pt-2 mt-1 border-t border-black/10 text-[9px] font-black uppercase tracking-tighter">
                                    <div>1U: <span className={c.tr.h>=0?'text-green-600':'text-red-600'}>{c.tr.h.toFixed(1)}%</span></div>
                                    <div>1W: <span className={c.tr.w>=0?'text-green-600':'text-red-600'}>{c.tr.w.toFixed(1)}%</span></div>
                                    <div>1M: <span className={c.tr.m>=0?'text-green-600':'text-red-600'}>{c.tr.m.toFixed(1)}%</span></div>
                                    <div>1J: <span className={c.tr.y>=0?'text-green-600':'text-red-600'}>{c.tr.y.toFixed(1)}%</span></div>
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        </div>
    );
}

function SportsWidget({ lang }) {
    const [tab, setTab] = useState('lst');
    const [search, setSearch] = useState('');
    const [golfTour, setGolfTour] = useState('PGA');
    const [exp, setExp] = useState({ f1c: false, f1s: false, f1l: false, gc: false, gs: false, gl: false });

    const f1Data = { 
        c: [ { r: "GP Bahrein", d: "02 Mar", t: "16:00" }, { r: "GP Saudi Arabia", d: "09 Mar", t: "18:00" }, { r: "GP Australia", d: "24 Mar", t: "05:00" }, { r: "GP Japan", d: "07 Apr", t: "07:00" }, { r: "GP China", d: "21 Apr", t: "09:00" } ], 
        s: [ { p: 1, n: "Verstappen", fl: "ðŸ‡³ðŸ‡±", pt: 25 }, { p: 2, n: "Norris", fl: "ðŸ‡¬ðŸ‡§", pt: 18 }, { p: 3, n: "Leclerc", fl: "ðŸ‡²ðŸ‡¨", pt: 15 }, { p: 4, n: "Sainz", fl: "ðŸ‡ªðŸ‡¸", pt: 12 } ], 
        lst: { title: 'GP Abu Dhabi', res: [ { p: 1, n: 'Verstappen', time: '1:27:02' }, { p: 2, n: 'Leclerc', time: '+17.9s' }, { p: 3, n: 'Russell', time: '+20.3s' } ] } 
    };
    
    const golfPga = { 
        c: [ { r: "The Players", d: "14 Mar", t: "14:00 NL" }, { r: "The Masters", d: "10 Apr", t: "15:00 NL" } ], 
        s: [ { p: 1, n: "Scheffler", fl: "ðŸ‡ºðŸ‡¸", pt: "3200" }, { p: 2, n: "Kim", fl: "ðŸ‡°ðŸ‡·", pt: "2100" } ], 
        lst: { title: 'Arnold Palmer Inv.', res: [ { p: 1, n: 'Scheffler', time: '-15' }, { p: 2, n: 'Clark', time: '-14' }, { p: 3, n: 'Lowry', time: '-13' } ] } 
    };

    const match = (s) => s.toLowerCase().includes(search.toLowerCase());
    const gData = golfTour === 'PGA' ? golfPga : golfPga; // Demo data is same for both

    return (
        <div className="widget h-[450px]">
            <div className="p-4 border-b bg-gray-50 flex justify-between items-center shrink-0">
                <div className="flex items-center gap-2 text-gray-500"><Ico.Trp/><h3 className="text-[10px] font-black uppercase tracking-widest">Sport</h3></div>
                <input type="text" placeholder="Zoeken..." value={search} onChange={e=>setSearch(e.target.value)} className="w-1/2 px-2 py-1 text-[10px] border rounded outline-none" />
            </div>
            <div className="flex border-b bg-white shrink-0">
                {[ {id:'cal', l:T[lang].cal}, {id:'lst', l:T[lang].lst}, {id:'std', l:T[lang].std} ].map(t => <button key={t.id} onClick={() => setTab(t.id)} className={`tab-btn ${tab === t.id ? 'active' : ''}`}>{t.l}</button>)}
            </div>
            <div className="p-4 flex-1 overflow-y-auto space-y-6 bg-white hide-scroll">
                <div>
                    <div className="flex items-center gap-2 mb-2 border-b border-gray-100 pb-1 text-[10px] font-black text-[#0073b1]">F1</div>
                    <div className="space-y-1">
                        {tab === 'cal' && f1Data.c.slice(0, exp.f1c ? 10 : 3).filter(x => match(x.r)).map(r => <div key={r.r} className="flex justify-between items-center text-xs p-2 bg-gray-50 rounded border"><div><span className="font-bold">{r.r}</span><div className="text-[9px] text-gray-400">{r.d}</div></div><span className="font-mono text-blue-600 font-bold">{r.t}</span></div>)}
                        {tab === 'lst' && f1Data.lst.res.slice(0, exp.f1l ? 10 : 3).filter(x => match(x.n)).map(r => <div key={r.n} className="flex justify-between text-xs p-2 border-b"><span>{r.p}. {r.n}</span><span className="text-gray-500 font-mono">{r.time}</span></div>)}
                        {tab === 'std' && f1Data.s.slice(0, exp.f1s ? 10 : 3).filter(x => match(x.n)).map(s => <div key={s.n} className="flex justify-between items-center text-xs p-2 border-b"><span>{s.p}. {s.n}</span><span className="bg-gray-800 text-white px-2 py-0.5 rounded font-mono text-[9px]">{s.pt}</span></div>)}
                    </div>
                </div>
                <div>
                    <div className="flex items-center justify-between mb-2 border-b border-gray-100 pb-1 text-[10px] font-black text-[#0073b1]">
                        <span>GOLF</span>
                        <div className="flex gap-1 bg-gray-100 p-0.5 rounded">
                            <button onClick={()=>setGolfTour('PGA')} className={`px-2 py-0.5 text-[8px] rounded uppercase ${golfTour==='PGA'?'bg-white shadow-sm text-blue-700':'text-gray-500'}`}>PGA</button>
                            <button onClick={()=>setGolfTour('DP')} className={`px-2 py-0.5 text-[8px] rounded uppercase ${golfTour==='DP'?'bg-white shadow-sm text-blue-700':'text-gray-500'}`}>DP</button>
                        </div>
                    </div>
                    <div className="space-y-1">
                        {tab === 'cal' && gData.c.filter(x => match(x.r)).map(r => <div key={r.r} className="flex justify-between items-center text-xs p-2 bg-gray-50 rounded border"><div><span className="font-bold">{r.r}</span><div className="text-[9px] text-gray-400">{r.d}</div></div><span className="font-mono text-blue-600 font-bold">{r.t}</span></div>)}
                        {tab === 'std' && gData.s.filter(x => match(x.n)).map(s => <div key={s.n} className="flex justify-between items-center text-xs p-2 border-b"><span>{s.p}. {s.n}</span><span className="bg-gray-800 text-white px-2 py-0.5 rounded font-mono text-[9px]">{s.pt}</span></div>)}
                    </div>
                </div>
            </div>
        </div>
    );
}

function NewsWidget({ lang }) {
    return <div className="widget h-[450px] flex items-center justify-center text-xs text-gray-400">Nieuws widget hersteld...</div>;
}

function App() {
    const [isAuth, setIsAuth] = useState(S.load('auth_status', false));
    const [layout, setLayout] = useState(S.load('layout_v7', ['ai', 'crypto', 'agenda', 'news', 'sports']));
    const [lang, setLang] = useState('nl');

    if (!isAuth) return <div className="min-h-screen flex flex-col items-center justify-center bg-[#000a14]"><button onClick={() => {setIsAuth(true); S.save('auth_status', true)}} className="bg-blue-600 text-white px-6 py-3 rounded-full font-bold">Login Demo</button></div>;

    const widgets = { ai: <div className="col-span-12 lg:col-span-8"><AIWidget lang={lang} /></div>, crypto: <div className="col-span-12 lg:col-span-4"><CryptoWidget lang={lang} /></div>, sports: <div className="col-span-12 lg:col-span-4"><SportsWidget lang={lang} /></div> };

    return (
        <div className="flex flex-col min-h-screen">
            <WeatherBar lang={lang} />
            <header className="px-6 md:px-10 pt-8 pb-6 max-w-[1600px] mx-auto w-full flex justify-between items-end border-b border-white/10 mb-6">
                <div><h1 className="text-xl md:text-2xl font-black text-white tracking-tight uppercase drop-shadow-md leading-none">Dashboard Michael</h1><p className="text-blue-200 text-[10px] font-black uppercase tracking-[0.4em] mt-2">Versie 4.0</p></div>
            </header>
            <main className="px-6 md:px-10 pb-16 max-w-[1600px] mx-auto w-full">
                <DailyBriefing lang={lang} />
                <div className="grid grid-cols-12 gap-6 md:gap-8">
                    {layout.map(w => <React.Fragment key={w}>{widgets[w]}</React.Fragment>)}
                </div>
            </main>
        </div>
    );
}

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>